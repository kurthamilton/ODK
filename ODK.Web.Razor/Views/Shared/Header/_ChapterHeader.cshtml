@using ODK.Core.Platforms
@using ODK.Web.Common.Components
@using ODK.Web.Common.Routes
@using ODK.Web.Razor.Models.Header
@model ChapterHeaderViewModel
@{
    var isMember = Model.Member?.IsMemberOf(Model.Chapter.Id) == true;

    var menuItems = new List<MenuItem>();

    menuItems.Add(new MenuItem 
    { 
        Text = "Events", 
        Link = OdkRoutes.Groups.Events(Model.Platform, Model.Chapter)
    });

    if (isMember)
    {
        menuItems.Add(new MenuItem 
        { 
            Text = "Knitwits", 
            Link = OdkRoutes.Groups.Members(Model.Platform, Model.Chapter)
        });
    }

    menuItems.Add(new MenuItem 
    { 
        Text = "Contact", 
        Link = OdkRoutes.Groups.Contact(Model.Platform, Model.Chapter) 
    });
    menuItems.Add(new MenuItem 
    { 
        Text = "About", 
        Link = OdkRoutes.Groups.About(Model.Platform, Model.Chapter)
    });
}

@await Html.PartialAsync("Header/_Header", new HeaderViewModel(Model.Context)
{
    ImageAltText = $"{Model.Chapter.GetDisplayName(Model.Platform)} Header Image",
    ImageLink = OdkRoutes.Groups.Group(Model.Platform, Model.Chapter),
    ImageUrl = Model.Chapter.BannerImageUrl,
    Navbar = new NavbarViewModel(Model.Context)
    {
        Breakpoint = "md",
        Chapter = Model.Chapter,
        Color = "dark",
        Compact = false,
        CssClass = null,
        Member = Model.Member,
        MenuItems = new []
        {
            menuItems.ToArray()
        }
    }
})