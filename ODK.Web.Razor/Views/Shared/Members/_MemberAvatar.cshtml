@using ODK.Web.Common.Routes
@using ODK.Web.Razor.Models.Members
@model MemberAvatarViewModel
@inject IOdkRoutes OdkRoutes
@{
    if (Model.Version == null)
    {
        return;    
    }

    var imageUrl = OdkRoutes.Members.Avatar(Model.Member.Id, Model.Version.Value);
    var maxWidth = Model.MaxWidth > 0 ? Model.MaxWidth : 75;

    var alt = User.Identity?.IsAuthenticated == true
        ? $"Photo of {Model.Member.FullName}"
        : "Photo of member";
}

<img style="@(maxWidth > 0 ? $"max-width: {maxWidth}px;" : null) @(Model.Width > 0 ? $"width: {Model.Width}px;" : null)"
     class="@(Model.IsTop ? "card-img-top" : "card-img")"
     src="@imageUrl"
     alt="@alt"
     data-img-fallback="/assets/img/member.png"
     onerror="setImageError(this)" />
