@using ODK.Core.Members
@using ODK.Services.Members
@using ODK.Web.Razor.Models.Members
@model ODK.Web.Razor.Models.Members.MembersContentViewModel
@inject IMemberService MemberService
@{
    var members = await MemberService.GetMembers(Model.Member, Model.Chapter.Id);
    var list = members
        .OrderBy(x => x.FullName)
        .Select(x => new ListMemberViewModel
        {
            Chapter = Model.Chapter,
            Member = x
        })
        .ToArray();
}

@await Html.PartialAsync("Members/_MemberList", new MemberListViewModel
{
    Chapter = Model.Chapter,
    Cols = 3,
    Members = list
})