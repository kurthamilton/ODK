@using ODK.Core.Utils
@using ODK.Services.Chapters.ViewModels
@using ODK.Web.Common.Routes
@using ODK.Web.Razor.Models.Components
@model GroupHomePageViewModel
@inject IOdkRoutes OdkRoutes

<div class="d-flex flex-column gap-3">
    @if (Model.Image != null)
    {
        <div>
            <img src="@OdkRoutes.Groups.Image(Model.Chapter.Id, Model.Image.Version)" />
        </div>
    }    

    <div class="flex-grow-1">
        <div class="d-flex flex-column gap-1 justify-content-end">
            @if (Model.ChapterLocation != null)
            {
                <div class="d-flex justify-content-end text-end">
                    @await Html.PartialAsync("Components/_Location", Model.ChapterLocation.Name)
                </div>
            }

            <div class="d-flex justify-content-end text-end">
                Going since @Model.Chapter.CreatedUtc.ToFriendlyDateString(Model.TimeZone)
            </div>
            <div class="d-flex justify-content-end text-end align-items-center gap-2">
                @await Html.PartialAsync("Components/_Icon", new IconViewModel(IconType.Members))
                @Model.MemberCount @StringUtils.Pluralise(Model.MemberCount, "member")
            </div>
        </div>
    </div>
</div>