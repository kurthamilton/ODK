@using ODK.Core.Features
@using ODK.Core.Utils
@using ODK.Services.Chapters.ViewModels
@using ODK.Web.Razor.Models.Components
@using ODK.Web.Razor.Models.SocialMedia
@model GroupHomePageViewModel

<div class="sidebar sidebar--cards">
    @await Html.PartialAsync("Groups/Home/_GroupInfo", Model)

    @if (Model.InstagramPosts.Count > 0)
    {
        @await Html.PartialAsync("Components/_Card", new CardViewModel
        {
            HeaderContentFunc = @<div>Latest from Instagram</div>,
            BodyContentFunc =
                @<div>
                    @await Html.PartialAsync("Components/_InstagramPosts", new InstagramPostsViewModel
                    {
                        Chapter = Model.Chapter,
                        Posts = Model.InstagramPosts
                    })

                    @if (!string.IsNullOrEmpty(Model.Links?.InstagramName))
                    {
                        <div class="d-flex align-content-center justify-content-end">
                            <div>
                                @await Html.PartialAsync("Components/_InstagramLink", Model.Links.InstagramName)
                            </div>
                        </div>
                    }
                </div>
        })    
    }

    @if (Model.Links?.HasLinks == true)
    {
        @await Html.PartialAsync("Components/_Card", new CardViewModel
        {
            HeaderContentFunc = @<div>Find us</div>,
            BodyContentFunc =
                @<div class="d-flex gap-3">
                    @await Html.PartialAsync("Components/_SocialMediaLinks", new SocialMediaLinksViewModel
                    {
                        Facebook = Model.Links.FacebookName,
                        Instagram = Model.Links.InstagramName,
                        Large = true,
                        Twitter = Model.Links.TwitterName
                    })
                </div>
        }) 
    }
</div>