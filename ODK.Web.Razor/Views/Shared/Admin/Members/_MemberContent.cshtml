@using ODK.Core.Members
@using ODK.Services
@using ODK.Services.Members
@using ODK.Services.Members.ViewModels
@using ODK.Web.Common.Extensions
@using ODK.Web.Common.Routes
@using ODK.Web.Razor.Models.Admin
@using ODK.Web.Razor.Models.Admin.Members
@model MemberAdminPageViewModel
@inject IOdkRoutes OdkRoutes

@await Html.PartialAsync("Admin/Members/_MemberAdminTabs", Model)

<form method="post">
    @*@Html.AntiForgeryToken()*@
    @await Html.PartialAsync("Admin/Members/_MemberForm", new MemberFormViewModel
    {
        SubscriptionExpiryDate = Model.Subscription?.ExpiresUtc,
        SubscriptionType = Model.Subscription?.Type
    })
    <div class="d-flex">
        <button type="submit" class="btn btn-primary me-auto">Update</button>
        @await Html.PartialAsync("Admin/_AdminLink", new AdminLinkViewModel
        {
            Class = "btn btn-danger",
            Route = OdkRoutes.GroupAdmin.MemberDelete(Model.Chapter, Model.Member.Id),
            Text = "Delete"
        })
    </div>
</form>