@using ODK.Web.Common.Components
@using ODK.Web.Common.Routes
@using ODK.Web.Common.Services
@using ODK.Web.Razor.Models.Components
@using ODK.Web.Razor.Services
@inject IOdkRoutes OdkRoutes
@{
    Layout = "_HomeLayout";

    var menuItems = new[]
    {
        new MenuItem { Link = OdkRoutes.SiteAdmin.Emails, Text = "Emails" },
        new MenuItem { Link = OdkRoutes.SiteAdmin.Errors, Text = "Error log" },
        new MenuItem { Link = OdkRoutes.SiteAdmin.Features, Text = "Features" },
        new MenuItem { Link = OdkRoutes.SiteAdmin.Groups, Text = "Groups" },
        new MenuItem { Link = OdkRoutes.SiteAdmin.Issues, Text = "Issues" },
        new MenuItem { Link = OdkRoutes.SiteAdmin.Messages, Text = "Messages" },
        new MenuItem { Link = OdkRoutes.SiteAdmin.Payments, Text = "Payments" },
        new MenuItem { Link = OdkRoutes.SiteAdmin.Subscriptions, Text = "Subscriptions" },
        new MenuItem { Link = OdkRoutes.SiteAdmin.Topics, Text = "Topics" }
    };
}

@section styles
{
    @await RenderSectionAsync("styles", required: false)
}

@await Html.PartialAsync("Components/_Body", new BodyViewModel
{
    Title = "Site admin",
    Content = await Html.PartialAsync("Components/_TwoColLeftMenu", new TwoColLeftMenuViewModel
    {
        BodyContentFunc = _ => RenderBody(),
        MenuContentFunc = _ => Html.PartialAsync("Components/_SideMenu", new SideMenuViewModel
        {
            MenuItems = menuItems,
            Root = true
        })
    })
})

@section scripts
{
    <script src="/js/odk.admin.js" asp-append-version="true"></script>
    <script src="~/js/odk.lists.js" asp-append-version="true"></script>

    @await RenderSectionAsync("scripts", required: false)
}
